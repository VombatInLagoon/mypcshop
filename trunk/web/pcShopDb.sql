drop table COMPONENT cascade;
drop table PRODUCT cascade;
drop table SUPPLIERS cascade;
drop table ORDERS cascade;
drop table ORDER_ITEMS cascade;
drop table USERS cascade;
drop table USER_ROLES cascade;



CREATE TABLE COMPONENT(
	COMPONENT_ID INT NOT NULL AUTO_INCREMENT, 
	NAME VARCHAR(50),
	PRODUCT_ID INT,
	SUPPLIER_ID INT,
	SERIAL_NUM VARCHAR(20) NOT NULL,
	PRICE INT NOT NULL,
	STOCK_NUM INT NOT NULL,
	DESCRIPTION VARCHAR(200),
	PRIMARY KEY(COMPONENT_ID),
	FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
	FOREIGN KEY(SUPPLIER_ID) REFERENCES SUPPLIERS(SUPPLIER_ID)
);

-- PRODUCT CONTAINS ALL PRODUCTS IN THE SHOP


CREATE TABLE PRODUCT(
	PRODUCT_ID INT  NOT NULL AUTO_INCREMENT, 
	SERIAL INT NOT NULL, 
	COMPONENT_LIST VARCHAR(300), 
	
	PRIMARY KEY(PRODUCT_ID)
	
);




CREATE TABLE SUPPLIERS(
	SUPPLIER_ID INT NOT NULL AUTO_INCREMENT,
	S_NAME VARCHAR(50),
	ADDRESS VARCHAR(50),
	PRIMARY KEY(SUPPLIER_ID)
	
);


-- ONE ORDER MAY CONTAIN A LOT OF PRODUCTS

CREATE TABLE ORDERS(
	ORDER_ID INT NOT NULL AUTO_INCREMENT,
	BUYER_NAME VARCHAR(100),
	SHIPPING_ADRESS VARCHAR(100),
	SHIPPING_ZIPCODE VARCHAR(10),
	SHIPPING_CITY VARCHAR(30),
	PRIMARY KEY(ORDER_ID)
);

-- EACH DISTINCT ORDER ITEMS	


CREATE TABLE ORDER_ITEMS(
	ORDER_ITEM_ID INT NOT NULL AUTO_INCREMENT,
	ORDER_ID INT,
	PRODUCT_ID INT,
	QUANTITY INT,
	PRIMARY KEY(ORDER_ITEM_ID),
	FOREIGN KEY(ORDER_ID) REFERENCES ORDERS(ORDER_ID),
	FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);


create table USERS(
       USER_NAME varchar(15) not null primary key,
       USER_PASS varchar(15) not null,
       NAME varchar(100) not null,
       STREET_ADDRESS varchar(100)not null,
       ZIP_CODE varchar(10) not null,
       CITY varchar(30) not null,
       COUNTRY varchar(30) not null
);

create table USER_ROLES(
	USER_NAME varchar(15) not null,
	ROLE_NAME varchar(15) not null,
	primary key (USER_NAME, ROLE_NAME)
);






-- SOME AUTHORS. THE AUTHOR_ID WILL BE GENERATED BY THE SEQUENCE

INSERT INTO COMPONENT(NAME, SERIAL_NUM,PRICE,STOCK_NUM,SUPPLIER_ID) VALUES('RAM', 123456,200,5,1);
INSERT INTO COMPONENT(NAME, SERIAL_NUM,PRICE,STOCK_NUM,SUPPLIER_ID) VALUES('CPU', 122334,5000,20,2);
INSERT INTO COMPONENT(NAME, SERIAL_NUM,PRICE,STOCK_NUM,SUPPLIER_ID) VALUES('VGA', 188757,4500,7,1);

INSERT INTO SUPPLIERS(S_NAME, ADDRESS) VALUES('hp', 'stockholm,sergelstorg');
INSERT INTO SUPPLIERS(S_NAME, ADDRESS) VALUES('intel', 'stockholm,sergelstorg');




insert into USERS(USER_NAME, USER_PASS, NAME, STREET_ADDRESS, ZIP_CODE, CITY, COUNTRY) 
     VALUES('tomcat','tacmot','Tom Cat','Apache Road', '34 567', 'Petaluma', 'USA');
insert into USERS(USER_NAME, USER_PASS, NAME, STREET_ADDRESS, ZIP_CODE, CITY, COUNTRY) 
     VALUES('gyro','glurk','Gyro Gearloose','Duck Road', '78 901', 'Ducksbury', 'USA');
insert into USERS(USER_NAME, USER_PASS, NAME, STREET_ADDRESS, ZIP_CODE, CITY, COUNTRY) 
     VALUES('admin', 'glurk','System user', 'Polacksbacken', '752 37', 'Uppsala', 'Sweden');

insert into USER_ROLES(USER_NAME, ROLE_NAME) VALUES('tomcat','tomcat');
insert into USER_ROLES(USER_NAME, ROLE_NAME) VALUES('gyro', 'tomcat');
insert into USER_ROLES(USER_NAME, ROLE_NAME) VALUES('admin','manager');
insert into USER_ROLES(USER_NAME, ROLE_NAME) VALUES('admin','admin');
insert into USER_ROLES(USER_NAME, ROLE_NAME) VALUES('admin','tomcat');